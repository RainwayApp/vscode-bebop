{
	"$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
	"name": "Bebop",
	"scopeName": "source.bop",
	"fileTypes": [
		"bop"
	],
	"patterns": [
		{
			"include": "#comments"
		},
		{
			"include": "#attributeSection"
		},
		{
			"include": "#message"
		},
		{
			"include": "#struct"
		},
		{
			"include": "#enum"
		}
	],
	"repository": {
		"comments": {
			"patterns": [
				{
					"name": "comment.block.bop",
					"begin": "/\\*",
					"end": "\\*/"
				},
				{
					"name": "comment.line.double-slash.bop",
					"begin": "//",
					"end": "$\\n?"
				}
			]
		},
		"attributeSection": {
			"begin": "(\\[)(opcode|deprecated)?(\\:)?",
			"beginCaptures": {
				"1": {
					"name": "punctuation.squarebracket.open.bop"
				},
				"2": {
					"name": "keyword.other.attribute-specifier.bop"
				},
				"3": {
					"name": "punctuation.separator.colon.bop"
				}
			},
			"end": "(\\])",
			"endCaptures": {
				"1": {
					"name": "punctuation.squarebracket.close.bop"
				}
			},
			"patterns": [
				{
					"include": "#comments"
				},
				{
					"include": "#attribute"
				}
			]
		},
		"attribute": {
			"patterns": [
				{
					"include": "#attributeArguments"
				}
			]
		},
		"attributeArguments": {
			"begin": "(\\()",
			"beginCaptures": {
				"1": {
					"name": "punctuation.paren.open.bop"
				}
			},
			"end": "(\\))",
			"endCaptures": {
				"1": {
					"name": "punctuation.paren.close.bop"
				}
			},
			"patterns": [
				{
					"include": "#number"
				},
				{
					"include": "#string"
				}
			]
		},
		"message": {
			"begin": "(message)\\s+([A-Za-z][A-Za-z0-9_.]*)\\s*(\\{)?",
			"beginCaptures": {
				"1": {
					"name": "keyword.other.bop"
				},
				"2": {
					"name": "entity.name.class.message.bop"
				}
			},
			"end": "\\}",
			"patterns": [
				{
					"include": "$self"
				},
				{
					"include": "#enum"
				},
				{
					"include": "#comments"
				},
				{
					"include": "#field"
				},
				{
					"include": "#mapfield"
				}
			]
		},
		"struct": {
			"begin": "(readonly)?\\s*(struct)\\s+([A-Za-z][A-Za-z0-9_.]*)\\s*(\\{)?",
			"beginCaptures": {
				"1": {
					"name": "keyword.other.bop"
				},
				"2": {
					"name": "keyword.other.bop"
				},
				"3": {
					"name": "entity.name.class.struct.bop"
				}
			},
			"end": "\\}",
			"patterns": [
				{
					"include": "$self"
				},
				{
					"include": "#enum"
				},
				{
					"include": "#comments"
				},
				{
					"include": "#field"
				},
				{
					"include": "#mapfield"
				}
			]
		},
		"field": {
			"begin": "\\b([\\w.]+)((\\[)(\\]))?\\s+(\\w+)(?:\\s*=\\s*(\\d+))?(0[xX][0-9a-fA-F]+|[0-9]+)?",
			"beginCaptures": {
				"1": {
					"name": "storage.type.bop"
				},
				"3": {
					"name": "punctuation.squarebracket.open.bop"
				},
				"4": {
					"name": "punctuation.squarebracket.close.bop"
				},
				"5": {
					"name": "variable.other.bop"
				},
				"6": {
					"name": "constant.numeric.bop"
				}
			},
			"end": ";",
			"patterns": [
				
			]
		},
		"mapfield": {
			"begin": "\\s*(map)\\s*(\\[)\\s*([\\w.]+)\\s*(,)\\s*([\\w.]+)\\s*(\\])\\s+(\\w+)(?:\\s*=\\s*(\\d+))?",
			"beginCaptures": {
				"1": {
					"name": "storage.type.bop"
				},
				"2": {
					"name": "punctuation.squarebracket.open.bop"
				},
				"3": {
					"name": "storage.type.bop"
				},
				"4": {
					"name": "punctuation.comma.bop"
				},
				"5": {
					"name": "storage.type.bop"
				},
				"6": {
					"name": "punctuation.squarebracket.close.bop"
				},
				"7": {
					"name": "variable.other.bop"
				},
				"8": {
					"name": "constant.numeric.bop"
				}
			},
			"end": ";",
			"patterns": [
	
			]
		},
		"enum": {
			"begin": "(enum)(\\s+)([A-Za-z][A-Za-z0-9_]*)(\\s*)(\\{)?",
			"beginCaptures": {
				"1": {
					"name": "keyword.other.bop"
				},
				"3": {
					"name": "entity.name.class.bop"
				}
			},
			"end": "\\}",
			"patterns": [
				{
					"include": "#comments"
				},
				{
					"begin": "([A-Za-z][A-Za-z0-9_]*)\\s*=\\s*(0[xX][0-9a-fA-F]+|[0-9]+)",
					"beginCaptures": {
						"1": {
							"name": "variable.other.bop"
						},
						"2": {
							"name": "constant.numeric.bop"
						}
					},
					"end": ";",
					"patterns": [
					
					]
				}
			]
		},
		"ident": {
			"match": "[A-Za-z][A-Za-z0-9_]*",
			"name": "entity.name.class.bop"
		},
		"storagetypes": {
			"match": "\\b(bool|byte|uint16|int16|uint32|int32|uint64|int64|float32|float64|string|guid|date)\\b",
			"name": "storage.type.bop"
		},
		"string": {
			"match": "('([^']|\\')*')|(\"([^\"]|\\\")*\")",
			"name": "string.quoted.double.bop"
		},
		"number": {
			"name": "constant.numeric.bop",
			"match": "\\b((0(x|X)[0-9a-fA-F]*)|(([0-9]+\\.?[0-9]*)|(\\.[0-9]+))((e|E)(\\+|-)?[0-9]+)?)\\b"
		}
	}
}